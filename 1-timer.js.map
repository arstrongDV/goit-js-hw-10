{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\"\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst button = document.querySelector(\"button\");\n\nbutton.disabled = true;\n\nlet userSelectedDate = null;\n\nflatpickr(input, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    if (selectedDates[0].getTime() > Date.now()) {\n      userSelectedDate = selectedDates[0].getTime();\n      button.disabled = false;\n    } else {\n     button.disabled = true;\n    iziToast.error({\n        title: 'OK',\n        message: 'Please choose a date in the future',\n    });\n    }\n  },\n});\n\nclass Timer {\n    constructor({ onTick, convertMs, isActive }){\n        this.onTick = onTick;\n        this.isActive = isActive;\n        this.convertMs = convertMs;\n    }\n\n    start(){\n        if (this.isActive) return;\n        \n        this.isActive = true;\n        button.disabled = true;\n        input.disabled = true;\n\n        setInterval(() => {\n            const deltaTime = userSelectedDate - Date.now();\n\n            if (deltaTime <= 0) {\n                this.stop();\n                return;\n            }\n\n            this.onTick(this.convertMs(deltaTime));\n        }, 1000)\n    }\n\n    // getTimeComponent(time){\n    //     const second = 1000;\n    //     const minute = second * 60;\n    //     const hour = minute * 60;\n    //     const day = hour * 24;\n      \n    //     return {\n    //         days: String(Math.floor(time / day)).padStart(2, \"0\"),\n    //         hours: String(Math.floor((time % day) / hour)).padStart(2, \"0\"),\n    //         minutes: String(Math.floor((time % hour) / minute)).padStart(2, \"0\"),\n    //         seconds: String(Math.floor((time % minute) / second)).padStart(2, \"0\"),\n    //       };\n    // }\n\n    stop() {\n        this.isActive = false;\n        input.disabled = false;\n      }\n    \n}\n\nfunction convertMs(time) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    return {\n        days: String(Math.floor(time / day)).padStart(2, \"0\"),\n        hours: String(Math.floor((time % day) / hour)).padStart(2, \"0\"),\n        minutes: String(Math.floor((time % hour) / minute)).padStart(2, \"0\"),\n        seconds: String(Math.floor((time % minute) / second)).padStart(2, \"0\"),\n      };\n  }\n\nconst updateTime = ({ days, hours, minutes, seconds }) => {\n    document.querySelector(\"[data-days]\").textContent = days;\n    document.querySelector(\"[data-hours]\").textContent = hours;\n    document.querySelector(\"[data-minutes]\").textContent = minutes;\n    document.querySelector(\"[data-seconds]\").textContent = seconds;\n  };\n\nconst timer = new Timer({\n    onTick: updateTime,\n    convertMs,\n    isActive: false\n});\n\nbutton.addEventListener('click', timer.start.bind(timer));"],"names":["input","button","userSelectedDate","flatpickr","selectedDates","iziToast","Timer","onTick","convertMs","isActive","deltaTime","time","updateTime","days","hours","minutes","seconds","timer"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,SAAW,GAElB,IAAIC,EAAmB,KAEvBC,EAAUH,EAAO,CACf,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQI,EAAe,CACjBA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,OACpCF,EAAmBE,EAAc,CAAC,EAAE,QAAO,EAC3CH,EAAO,SAAW,KAEnBA,EAAO,SAAW,GACnBI,EAAS,MAAM,CACX,MAAO,KACP,QAAS,oCACjB,CAAK,EAEF,CACH,CAAC,EAED,MAAMC,CAAM,CACR,YAAY,CAAE,OAAAC,EAAQ,UAAAC,EAAW,SAAAC,CAAQ,EAAG,CACxC,KAAK,OAASF,EACd,KAAK,SAAWE,EAChB,KAAK,UAAYD,CACpB,CAED,OAAO,CACC,KAAK,WAET,KAAK,SAAW,GAChBP,EAAO,SAAW,GAClBD,EAAM,SAAW,GAEjB,YAAY,IAAM,CACd,MAAMU,EAAYR,EAAmB,KAAK,IAAG,EAE7C,GAAIQ,GAAa,EAAG,CAChB,KAAK,KAAI,EACT,MACH,CAED,KAAK,OAAO,KAAK,UAAUA,CAAS,CAAC,CACxC,EAAE,GAAI,EACV,CAgBD,MAAO,CACH,KAAK,SAAW,GAChBV,EAAM,SAAW,EAClB,CAEP,CAEA,SAASQ,EAAUG,EAAM,CAMrB,MAAO,CACH,KAAM,OAAO,KAAK,MAAMA,EAAO,KAAG,CAAC,EAAE,SAAS,EAAG,GAAG,EACpD,MAAO,OAAO,KAAK,MAAOA,EAAO,MAAO,IAAI,CAAC,EAAE,SAAS,EAAG,GAAG,EAC9D,QAAS,OAAO,KAAK,MAAOA,EAAO,KAAQ,GAAM,CAAC,EAAE,SAAS,EAAG,GAAG,EACnE,QAAS,OAAO,KAAK,MAAOA,EAAO,IAAU,GAAM,CAAC,EAAE,SAAS,EAAG,GAAG,CAC7E,CACG,CAEH,MAAMC,EAAa,CAAC,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,IAAO,CACtD,SAAS,cAAc,aAAa,EAAE,YAAcH,EACpD,SAAS,cAAc,cAAc,EAAE,YAAcC,EACrD,SAAS,cAAc,gBAAgB,EAAE,YAAcC,EACvD,SAAS,cAAc,gBAAgB,EAAE,YAAcC,CAC3D,EAEMC,EAAQ,IAAIX,EAAM,CACpB,OAAQM,EACR,UAAAJ,EACA,SAAU,EACd,CAAC,EAEDP,EAAO,iBAAiB,QAASgB,EAAM,MAAM,KAAKA,CAAK,CAAC"}